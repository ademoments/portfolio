---
import SectionTitle from "./SectionTitle.astro";
import { getCollection } from "astro:content";
const projects = (await getCollection("projects")).sort((a,b)=>(a.data.order??0)-(b.data.order??0));
---
<SectionTitle id="projects" title="Projets" subtitle="Sélection Data/ML, clean code & MLOps">
  <div class="grid md:grid-cols-2 gap-6">
    {projects.map(({ data }) => (
      <article class="rounded-2xl border border-slate-200/30 dark:border-white/10 bg-white/50 dark:bg-white/5 backdrop-blur shadow-lg p-5 flex flex-col">
        {data.image && <img src={data.image} alt={data.title} class="rounded-xl mb-4" />}
        <h3 class="text-lg font-semibold">{data.title}</h3>
        <p class="text-sm mt-2 opacity-80">{data.description}</p>
        <div class="mt-3 flex flex-wrap gap-2 text-xs opacity-80">
          {data.tags?.map((t) => <span class="rounded-full border px-2 py-0.5">{t}</span>)}
        </div>
        <div class="mt-4 flex gap-3 mt-auto">
          {data.repo && <a class="text-indigo-600" href={data.repo} target="_blank">Code</a>}
          {data.demo && <a class="text-indigo-600" href={data.demo} target="_blank">Démo</a>}
        </div>
      </article>
    ))}
  </div>
</SectionTitle>
